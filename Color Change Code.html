<html>
<body>
  <div id="root" style="text-align:center;"></div>   
  <div id="clock" style="text-align:center;"></div>  
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">


    function ColorChange() { 
      
      const state = {manualColor: undefined};
      
      function handleClick() {
        Object.assign(state, {manualColor: document.getElementById('newcolor').value});
        console.log('handleClick', state);
      }
      
      const [newcolor, setColor] = React.useState(window.localStorage.getItem('newcolor') || '')
      React.useEffect(() => {
        window.localStorage.setItem('newcolor', newcolor)
      })
      const handleColor = event => setColor(event.target.value)
      
      //TODO maybe instead of rendering the element every second, let's see if we can
      //refactor this to only update the element value.
      function tick() {
        const time = new Date().toLocaleTimeString()
        console.log(time);
        let newColor = getColor();
        console.log(state.manualColor ? state.manualColor : newColor);
        const element = (
          <>
            <input id="clockInput" readOnly value={time} style={{color: state.manualColor ? state.manualColor : newColor}}/>
          </>
        )
        ReactDOM.render(element, document.getElementById('clock'))
      }
      
      function getColor() {
        let time = new Date().getSeconds()
        let newcolor = ''
        if (time >= 0 && time < 10) {
          newcolor = "blue";
        }
        else if (time >= 10 && time < 20) {
          newcolor = "red";
        }
        else if (time >= 20 && time < 30) {
          newcolor = "orange";
        }
        else if (time >= 30 && time < 40) {
          newcolor = "purple";
        }
        else if (time >= 40 && time < 50) {
          newcolor = "green";
        }
        else if (time >= 50 && time < 60) {
          newcolor = "tomato";
        }
        return newcolor; 
      }
      
      setInterval(tick, 1000);
      
      return (
        <div>
          <form>
            <label htmlFor="newcolor">Color: </label>
            <input onBlur={handleColor} id="newcolor"/>
            <button type="button" onClick={handleClick}>Enter</button>
          </form>
        </div>
      );
    }
    
    ReactDOM.render(<ColorChange />, document.getElementById('root'))
     
  </script>
</body>
</html>
